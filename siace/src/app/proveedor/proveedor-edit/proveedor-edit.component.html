<h2>Detalle del proveedor</h2>
<form
  *ngIf="proveedor"
  #editForm="ngForm"
  (ngSubmit)="save()"
  autocomplete="off"
>
  <div class="row">
    <div class="col-md-4">
      <mat-form-field>
        <mat-label>Clave</mat-label>
        <input
          matInput
          [(ngModel)]="proveedor.pveId"
          id="pveId"
          name="pveId"
          placeholder="Clave"
          readonly
        />
      </mat-form-field>
    </div>

    <div class="col-md-4">
      <mat-form-field>
        <mat-label>Nombre</mat-label>
        <input
          matInput
          [(ngModel)]="proveedor.pveNombre"
          id="pveNombre"
          name="pveNombre"
          placeholder="Nombre"
          required
        />
        <mat-error *ngIf="proveedor.pveNombre == ''"
          >Nombre es requerido</mat-error
        >
      </mat-form-field>
    </div>

    <div class="col-md-4">
      <mat-form-field>
        <mat-label>Activo</mat-label>
        <mat-select
          [(ngModel)]="proveedor.pveActivo"
          id="pveActivo"
          name="pveActivo"
          required
        >
          <mat-option [value]="true">Sí</mat-option>
          <mat-option [value]="false">No</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <mat-form-field>
        <mat-label>Calle</mat-label>
        <input
          matInput
          [(ngModel)]="proveedor.pveCalle"
          id="pveCalle"
          name="pveCalle"
          placeholder="Calle"
          required
        />
        <mat-error *ngIf="proveedor.pveCalle == ''"
          >Calle es requerido</mat-error
        >
      </mat-form-field>
    </div>

    <div class="col-md-4">
      <mat-form-field>
        <mat-label>Número Exterior</mat-label>
        <input
          matInput
          [(ngModel)]="proveedor.pveNumeroExterior"
          id="pveNumeroExterior"
          name="pveNumeroExterior"
          placeholder="Número Exterior"
          required
        />
        <mat-error *ngIf="proveedor.pveNumeroExterior == ''"
          >Número Exterior es requerido</mat-error
        >
      </mat-form-field>
    </div>

    <div class="col-md-4">
      <mat-form-field>
        <mat-label>Número Interior</mat-label>
        <input
          matInput
          [(ngModel)]="proveedor.pveNumeroInterior"
          id="pveNumeroInterior"
          name="pveNumeroInterior"
          placeholder="Número Interior"
        />
      </mat-form-field>
    </div>
  </div>

  <!-- SECCIÓN DE UBICACIÓN CORREGIDA -->
  <div class="row">
    <div class="col-md-3">
      <mat-form-field>
        <mat-label>Estado</mat-label>
        <mat-select
          [value]="proveedor.pveEstId"
          (selectionChange)="onEstadoChange($event)"
          name="pveEstId"
        >
          <mat-option *ngFor="let estado of estadosList" [value]="estado.estId">
            {{ estado.estNombre }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="col-md-3">
      <mat-form-field>
        <mat-label>Municipio</mat-label>
        <mat-select
          [value]="proveedor.pveMunId"
          (selectionChange)="onMunicipioChange($event)"
          name="pveMunId"
        >
          <mat-option *ngFor="let municipio of municipiosList" [value]="municipio.munId">
            {{ municipio.munNombre }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="col-md-3">
      <mat-form-field>
        <mat-label>Ciudad</mat-label>
        <mat-select
          [value]="proveedor.pveCiuId"
          (selectionChange)="onCiudadChange($event)"
          name="pveCiuId"
        >
          <mat-option *ngFor="let ciudad of ciudadesList" [value]="ciudad.ciuId">
            {{ ciudad.ciuNombre }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="col-md-3">
      <mat-form-field>
        <mat-label>Colonia</mat-label>
        <mat-select
          [value]="proveedor.pveColId"
          (selectionChange)="onColoniaChange($event)"
          name="pveColId"
          required
        >
          <mat-option *ngFor="let colonia of coloniasList" [value]="colonia.colId">
            {{ colonia.colNombre }}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="proveedor.pveColId == undefined"
          >Colonia es requerido</mat-error
        >
      </mat-form-field>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <mat-form-field>
        <mat-label>Teléfono</mat-label>
        <input
          matInput
          type="tel"
          [(ngModel)]="proveedor.pveTelefono"
          id="pveTelefono"
          name="pveTelefono"
          placeholder="Teléfono"
        />
        <mat-error *ngIf="proveedor.pveTelefono == undefined"
          >Teléfono es requerido</mat-error
        >
      </mat-form-field>
    </div>

    <div class="col-md-4">
      <mat-form-field>
        <mat-label>Email</mat-label>
        <input
          matInput
          type="email"
          [(ngModel)]="proveedor.pveCorreoElectronico"
          id="pveCorreoElectronico"
          name="pveCorreoElectronico"
          placeholder="Email"
        />
      </mat-form-field>
    </div>

    <div class="col-md-4">
      <mat-form-field>
        <mat-label>Número</mat-label>
        <input
          matInput
          [(ngModel)]="proveedor.pveNumero"
          id="pveNumero"
          name="pveNumero"
          placeholder="Número"
        />
      </mat-form-field>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <mat-form-field>
        <mat-label>Observaciones</mat-label>
        <textarea
          matInput
          [(ngModel)]="proveedor.pveObservaciones"
          id="pveObservaciones"
          name="pveObservaciones"
          placeholder="Observaciones"
          rows="3"
        ></textarea>
      </mat-form-field>
    </div>
  </div>

  <div class="button-row text-center" role="group">
    <button
      type="submit"
      mat-raised-button
      color="primary"
      [disabled]="!editForm.form.valid"
    >
      Guardar
    </button>
    <button mat-button mat-dialog-close>Cancelar</button>
  </div>
</form>